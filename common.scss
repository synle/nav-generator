// ============================================================================
// Common Styles - Shared between nav-generator and bashrc/webapp
// ============================================================================

// ============================================================================
// Color Theme Mixins
// ============================================================================

// Ayu Light (Day)
@mixin light-theme {
  /* Backgrounds */
  --colorBgMain: #fafafa; /* Ayu Light Background */
  --colorBgSecondary: #f0f0f0; /* Ayu Light UI / Sidebar */
  --colorBgHover: #e6e6e6; /* Soft Grey Hover */

  /* Typography */
  --colorTextMain: #5c6773; /* Ayu Light Body Text (Dark Grey-Blue) */
  --colorTextLink: #36a3d9; /* Ayu Light Blue */

  /* Status Colors */
  --colorTextSuccess: #6cbf43; /* Ayu Light Green */
  --colorTextError: #ff3333; /* Ayu Light Red */
  --colorTextWarning: #e7c547; /* Ayu Light Yellow/Orange */

  /* Borders & Accents */
  --colorBorderMain: #f29718; /* Ayu Light Accent (Orange/Gold) */
  --colorBorderSecondary: #abb0b6; /* Muted Border */
  --colorShadow: rgba(0, 0, 0, 0.05);
  --colorFocusRing: rgba(242, 151, 24, 0.3); /* Subtle Orange Glow */
}

// dracula theme
@mixin dark-theme {
  /* Backgrounds */
  --colorBgMain: #282a36; /* Dracula Background */
  --colorBgSecondary: #44475a; /* Dracula Current Line / Selection */
  --colorBgHover: #6272a4; /* Dracula Comment / Muted Blue */

  /* Typography */
  --colorTextMain: #f8f8f2; /* Dracula Foreground */
  --colorTextLink: #8be9fd; /* Dracula Cyan */

  /* Status Colors */
  --colorTextSuccess: #50fa7b; /* Dracula Green */
  --colorTextError: #ff5555; /* Dracula Red */
  --colorTextWarning: #f1fa8c; /* Dracula Yellow */

  /* Borders & Accents */
  --colorBorderMain: #bd93f9; /* Dracula Purple */
  --colorBorderSecondary: #44475a;
  --colorShadow: #191a21; /* Darker shade for depth */
  --colorFocusRing: rgba(189, 147, 249, 0.5); /* Semi-transparent Purple */
}

:root {
  @include dark-theme;
}

@media (prefers-color-scheme: dark) {
  :root {
    @include dark-theme;
  }
}

@media print, (prefers-color-scheme: light) {
  :root {
    @include light-theme;
  }
}

:root[data-theme="dark"] {
  @include dark-theme;
}

:root[data-theme="light"] {
  @include light-theme;
}

// ============================================================================
// CSS Variables
// ============================================================================

:root {
  // Font families
  --fontFamilyMain: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  --fontFamilySecondary: Helvetica, Tahoma, Geneva, sans-serif;
  --fontFamilyMonospace: monospace;

  // Font weights
  --fontWeightBold: 700;
  --fontWeightSemiBold: 500;
  --fontWeightLight: 400;

  // Font sizes
  --fontSize1: 1.4rem;
  --fontSize2: 1.2rem;
  --fontSize3: 1.1rem;
  --fontSize4: 1rem;
  --fontSize5: 0.9rem;

  // Spacing
  --spaceSize0: 0;
  --spaceSize1: 0.3rem;
  --spaceSize2: 0.6rem;
  --spaceSize3: 0.75rem;
  --spaceSize4: 1rem;
  --spaceSize5: 2rem;

  // Borders
  --borderSize1: 2px;
  --borderSize2: 4px;
  --borderSize3: 5px;
  --borderSize4: 0.5rem;

  // Grid
  --gridGapHeight: 1rem;
  --gridGapWidth: 1.25rem;

  // Layout
  --maxBodyWidth: 100vw;
}

// ============================================================================
// Grid System
// ============================================================================

$gridColumnWidth: 330px;

// ============================================================================
// Reset & Base Styles
// ============================================================================

*,
::placeholder {
  box-sizing: border-box;
  color: var(--colorTextMain);
}

h1,
h2,
h3,
h4,
h5,
h6,
form,
pre,
p,
ul {
  margin: 0;
  padding: 0;
}

html,
body {
  &,
  &:before,
  &:after {
    min-height: 100%;
    border: none !important;
    background-color: var(--colorBgMain) !important;
  }

  font-size: 16px;
}

body {
  margin: auto !important;
  min-width: 0;
  max-width: var(--maxBodyWidth);
  width: 100%;
  font-family: var(--fontFamilyMain);
  font-weight: var(--fontWeightLight);
  overflow-x: hidden;
  overflow-y: auto !important;
  padding-bottom: 200px;
}

// ============================================================================
// Typography
// ============================================================================

h1,
.h1 {
  font-size: var(--fontSize1);
}

h2,
.h2 {
  font-size: var(--fontSize2);
}

h3,
.h3 {
  font-size: var(--fontSize3);
}

h4,
.h4 {
  font-size: var(--fontSize4);
}

h5,
.h5 {
  font-size: var(--fontSize5);
}

// ============================================================================
// Buttons
// ============================================================================

// ============================================================================
// Anchors (plain links)
// ============================================================================

a {
  color: var(--colorTextLink);
  text-decoration: none;
  cursor: pointer;
  transition: opacity 0.15s ease;

  &:hover,
  &:focus {
    opacity: 0.85;
    text-decoration: underline;
  }
}

// ============================================================================
// Buttons (and anchor buttons)
// ============================================================================

button,
a[role="button"] {
  cursor: pointer;
  user-select: none;
  text-decoration: none;
  outline: none;
  display: inline-flex;
  align-items: center;
  padding: var(--spaceSize2);
  border-radius: 6px;
  border: var(--borderSize1) solid var(--colorBorderSecondary);
  background: var(--colorBgMain);
  color: var(--colorTextLink);
  font-family: var(--fontFamilyMain);
  font-size: var(--fontSize4);
  font-weight: var(--fontWeightSemiBold);
  text-transform: uppercase;

  transition:
    opacity 0.15s ease,
    box-shadow 0.15s ease,
    transform 0.15s ease;

  &:hover,
  &:focus,
  &:focus-visible {
    opacity: 0.85;
    box-shadow: 0 0 0 6px var(--colorFocusRing);
    outline: none;
    text-decoration: none;
  }

  &.primary,
  &.selected,
  &:active {
    background: var(--colorTextLink);
    color: var(--colorBgMain);
    border-color: transparent;
  }

  img {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }
}

// ============================================================================
// Form Elements
// ============================================================================

input,
textarea {
  font-weight: var(--fontWeightLight);
  background: var(--colorBgMain);
  outline: none;
  font-size: var(--fontSize4);
  font-family: var(--fontFamilyMain);

  &:hover {
    background: var(--colorBgSecondary) !important;
  }

  &:focus {
    background: var(--colorBgHover) !important;
  }
}

select,
input {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  display: block;
  padding: 10px 12px;
  background-color: var(--colorBgSecondary);
  color: var(--colorTextMain);
  border: 1px solid var(--colorBorderMain);
  border-radius: 4px;
  font-size: 14px;
  line-height: 1.4;
  cursor: pointer;
  box-shadow: 0 2px 4px var(--colorShadow);
  transition:
    background-color 0.2s,
    border-color 0.2s;

  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath fill='%231a1a1a' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 10px 6px;

  &:hover {
    background-color: var(--colorBgHover);
    border-color: var(--colorBorderMain);
  }

  &:focus {
    outline: none;
    border-color: var(--colorTextLink);
    box-shadow: 0 0 0 2px var(--colorFocusRing);
  }
}

textarea {
  background-color: var(--colorBgSecondary);
  color: var(--colorTextMain);
  border: 1px solid var(--colorBorderMain);
  border-radius: 4px;
  padding: 8px;
  font-size: 14px;
  line-height: 1.4;
  width: 100%;
  resize: vertical;
  box-shadow: 0 2px 4px var(--colorShadow);
  transition:
    background-color 0.2s,
    border-color 0.2s;

  &:focus {
    outline: none;
    border-color: var(--colorTextLink);
    box-shadow: 0 0 0 2px var(--colorFocusRing);
  }
}

// ============================================================================
// Responsive Breakpoints
// ============================================================================

@media only screen and (max-width: $gridColumnWidth * 2) {
  :root {
    --fontSize1: 1rem;
    --fontSize2: 1rem;
    --fontSize3: 1rem;
    --fontSize4: 1rem;
    --fontSize5: 1rem;

    --gridGapHeight: 0.2rem;
    --gridGapWidth: 0.25rem;
  }

  button,
  a[role="button"],
  input {
    padding: var(--spaceSize1) var(--spaceSize2);
  }
}

// ============================================================================
// Radio Group
// ============================================================================

.nav-radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spaceSize2);
}

// ============================================================================
// Dropdown Styles
// ============================================================================

.dropdown {
  position: relative;
  display: inline-block;
  padding: 0 !important;
  min-width: 120px;
  text-align: center;

  button,
  a[role="button"] {
    text-align: center;
    width: 100%;
    display: block;
  }

  .dropdown-content {
    position: absolute;
    background: var(--colorBgMain);
    border: var(--borderSize1) solid var(--colorBorderSecondary);
    border-radius: 5px;
    box-shadow:
      0 2px 4px var(--colorShadow),
      0 4px 8px var(--colorShadow);
    z-index: 1000;
    left: 0;
    width: max-content;
    min-width: 100%;
    margin-top: 2px;

    &.pullUp {
      bottom: calc(100% + 2px);
      margin-top: 0;
      margin-bottom: 2px;
    }

    button,
    a[role="button"] {
      border: none;
      border-radius: 0;
      border-bottom: 1px solid var(--colorBorderSecondary);
      white-space: nowrap;
      word-break: normal;
      text-align: left;
      justify-content: flex-start;

      &:last-child {
        border-bottom: none;
      }

      &:first-child {
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
      }

      &:last-child {
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
      }
    }
  }

  .dropdown-trigger {
    width: 100%;
    display: block;
    padding: var(--spaceSize2);
    position: relative;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &::after {
      content: "â–¼";
      margin-left: 0.5rem;
      font-size: 0.7rem;
      display: inline-block;
      transition: transform 0.2s ease;
    }

    &[aria-expanded="true"]::after {
      transform: rotate(180deg);
    }
  }
}

// ============================================================================
// Modal Styles
// ============================================================================

.modal {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10000;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
  animation: fadeIn 0.2s ease-out;

  .modalContent {
    max-width: var(--maxBodyWidth);
    width: 90%;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    animation: slideIn 0.2s ease-out;
  }

  .modalBody {
    background: var(--colorBgSecondary);
    border: var(--borderSize1) solid var(--colorBorderMain);
    border-radius: 8px;
    padding: var(--spaceSize4);
    box-shadow:
      0 4px 6px var(--colorShadow),
      0 8px 16px var(--colorShadow);
  }

  .modalMessage {
    font-weight: var(--fontWeightBold);
    font-size: var(--fontSize3);
    line-height: 1.5;
    margin-bottom: var(--spaceSize3);
    word-break: break-word;
  }

  .modalTextarea {
    max-width: 100%;
    width: 100%;
    max-height: 60vh;
    min-height: 150px;
    margin-top: var(--spaceSize3);
    margin-bottom: 0;
    font-family: var(--fontFamilyMonospace);
    background: var(--colorBgMain);
    border: var(--borderSize1) solid var(--colorBorderMain);
    border-radius: 8px;
    padding: var(--spaceSize3);
    font-size: var(--fontSize4);
    resize: vertical;

    &--readonly {
      resize: none;
      cursor: default;
      opacity: 0.9;
      user-select: text;
    }
  }

  .modalBody .modalTextarea {
    margin-top: var(--spaceSize3);
    margin-bottom: 0;
  }

  .modalFooter {
    display: flex;
    justify-content: flex-end;
    gap: var(--spaceSize3);
    margin-top: var(--spaceSize4);

    .modalBtn {
      min-width: 100px;
      padding: var(--spaceSize2) var(--spaceSize4);
      font-weight: var(--fontWeightSemiBold);
      border-radius: 6px;
      transition: all 0.2s ease;

      button {
        text-align: center;
        justify-content: center;
      }
    }
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ============================================================================
// Utilities
// ============================================================================

.hidden {
  display: none !important;
}

// ============================================================================
// Print Styles
// ============================================================================

@media print {
  body {
    width: 800px;
    min-width: 800px;
  }
}

// ============================================================================
// Monaco Editor
// ============================================================================

.monaco-editor,
.monaco-editor .overflow-guard,
.monaco-editor .monaco-scrollable-element {
  width: 100% !important;
  max-width: 100% !important;
}

// ============================================================================
// bashrc/webapp Specific Utilities
// ============================================================================

// Text color utilities
.text-error,
.text-danger {
  color: var(--colorTextError) !important;
}

.text-success,
.text-info {
  color: var(--colorTextSuccess) !important;
}

.text-warning {
  color: var(--colorTextWarning) !important;
}

.text-muted {
  color: var(--colorTextSecondary) !important;
}
